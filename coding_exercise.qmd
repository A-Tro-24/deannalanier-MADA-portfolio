---
title: "R Coding Exercise"
output:
  html_document:
    toc: FALSE
---

## ##
# Load and check the data for the exercise

```{r}
#install and load required packages
library(tidyverse)
```

```{r}
#install and load required packages
library(dslabs)
#find gapminder data to be used for exercise
#help(gapminder)
```

```{r}
str(gapminder) #get an overview of the data structure
```

```{r}
summary(gapminder) #get a summary of the data
```

```{r}
class(gapminder) #determine the type of object gapminer is 
```

# Process Data and Plotting

```{r}
#save all data to "data"
data = gapminder

# subset based on Continent == Africa
africaData = data[ which(data$continent=="Africa"), ]

str(africaData) #get an overview of the data structure
```

```{r}
summary(gapminder) #get a summary of the data
```
## ##
### Infant Mortality and Life Expectancy 
```{r}
#Subset Africa infant mortality and life expectancy
infantM_LifeE = africaData[c("infant_mortality", "life_expectancy")]

str(infantM_LifeE) #get an overview of the data structure
```

```{r}
summary(infantM_LifeE)#get a summary of the data
```
## ##
**Plot life expectancy as a function of infant mortality **
```{r}
# Plot life expectancy as a function of infant mortality 
ggplot(infantM_LifeE, aes(x=infant_mortality, y=life_expectancy)) + geom_point()+xlab("Infant Mortality")+ ylab("Life Expectancy (Years)")+
  theme_bw()

```
## ##
### Population and Life Expectancy 

```{r}
#Subset Africa population and life expectancy
pop_LifeE = africaData[c("population", "life_expectancy")]
str(pop_LifeE) #get an overview of the data structure

```

```{r}
summary(pop_LifeE) #get a summary of the data
```
## ##
**Plot life expectancy as a function of population**
```{r}
# Plot life expectancy as a function of population
ggplot(pop_LifeE, aes(x=log(population), y=life_expectancy)) + geom_point() +xlab("Population (log)")+ ylab("Life Expectancy (Years)")+
  theme_bw()

```

# More Processing and Plotting

```{r}
# determine the years with missing values for NA
infantNA  = (africaData[is.na(africaData$infant_mortality), ]  )
table(infantNA$year)
```
## ##
### Year 2000
```{r}
# subset year 2000
y_2000 = africaData[ which(africaData$year=="2000"), ]
summary(y_2000) #get a summary of the data
```
## ##
**plot life expectancy as a function of infant mortality**
```{r}
# Plot life expectancy as a function of infant mortality 
ggplot(y_2000, aes(x=infant_mortality, y=life_expectancy)) + geom_point() +xlab("Infant Mortality")+ ylab("Life Expectancy (Years)")+
  theme_bw()
```
## ##
**Plot life expectancy as a function of infant mortality **
```{r}
# Plot life expectancy as a function of infant mortality 

ggplot(y_2000, aes(x=log(population), y=life_expectancy)) + geom_point() +xlab("Population (log)")+ ylab("Life Expectancy (Years)")+
  theme_bw()
```

# Simple Fit


**linear model to fit outcome = life expectancy and predictor = infant mortality**
```{r}

fit1 = lm(life_expectancy~infant_mortality, data=y_2000)
fit1_table = broom::tidy(fit1)
print(fit1_table)
```
## ##
**linear model to fit outcome = life expectancy and predictor = population**
```{r}
fit2 = lm(life_expectancy~population, data=y_2000)
fit2_table = broom::tidy(fit2)
print(fit2_table)
```
## ##
Based on the p-values of the linear models, a conclusion can be made that there is a statistical relationship between life expectancy and infant mortality but not life expectancy and population. 